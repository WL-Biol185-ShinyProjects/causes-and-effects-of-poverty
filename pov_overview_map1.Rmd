---
title: "pov_overview_map1"
author: "laetitia"
date: "11/6/2024"
output: html_document
---

*loading libraries
```{r}
library(leaflet)
library(magrittr)
library(sf)
library(geojsonio)
library(htmltools)
library(htmlwidgets)
library(stringi)
library(RColorBrewer)
```


*loading data for defining states within the map, downloaded zip file from census bureau
```{r}
library(sf)
states <- read_sf('cb_2019_us_state_5m.shp')
```

*imported poverty rates across state data csv file from census bureau
```{r}
library(readr)
CB_pov_overview <- read.csv("CB_pov_overview.csv", sep = ",")
View(CB_pov_overview)
```

*change column names of CB_pov_overview table
```{r}
colnames(CB_pov_overview) <- c("States", "FIPS", "Percentage", "Families Below Poverty", "Rank within US" )
```


*merging data
```{r}
states <- merge(states, CB_pov_overview, all.x = F)

```


*to make the states blue, using the blue palate
```{r}
CB_pov_overview$Percentage -> Percentage
palletteNum <- colorNumeric('Blues', domain = states$Percentage)
```

*creating map of US, define each state and add color and add data that is joined together per steps below
```{r}
library(leaflet)
m <- leaflet() %>%
  addProviderTiles(providers$CartoDB.PositronNoLabels)  %>% 
  setView(lng = -96.25, lat = 39.50, zoom = 4) %>% 
  addPolygons(data = states,
              weight = 0.5,
              color = 'white',
              smoothFactor = .3,
              fillOpacity = .75,
              fillColor = ~paletteNum(states$Percentage))
m
```